.main-container
  .container.wrapper
    .col-md-12
      .row
        img.logo(alt="Jedbangers" src="./assets/images/logo.png")

      .row.vertical-space

      .row.redeem-code-container(ng-controller="RedeemCodeController as redeemCode")
        .loading-spinner(ng-if="redeemCode.loading")
          span(us-spinner="{ lines: 6, speed: 2, length: 0, width: 10, radius: 10 }")

        form(
          ng-if     = "!redeemCode.loading && !redeemCode.contentCode"
          name      = "redeemCode.contentCodeForm"
          ng-submit = "redeemCode.doRedeem()"
        )

          .alert.alert-danger.alert-dismissable(ng-show="redeemCode.error")
            button.close(type="button" ng-click="redeemCode.clearErrors()") &times;
            .text-left
              small.glyphicon.glyphicon-exclamation-sign
              small.sr-only Error
              small &nbsp;
              small {{ redeemCode.error.title }}


            .text-center
              small &nbsp; &nbsp; &nbsp; &nbsp;
              small
                strong {{ redeemCode.error.message }}

          .form-group
            label(for="") Introduce el codigo exclusivo de descarga
            input.input-lg.form-control(
              type        = "text"
              ng-model    = "redeemCode.code"
              placeholder = "ej: O6Z6Z6Y"
            )

          button.btn.btn-lg.btn-default(
            type        = "submit"
            ng-disabled = "!redeemCode.code"
            analytics-on    = "click"
            analytics-event = "Redeem code"
            analytics-label = "{{ redeemCode.code }}"
          ) Canjear codigo

        .content-code(ng-if="!redeemCode.loading && redeemCode.contentCode")

          div(ng-if="!redeemCode.hasContentItems()")
            .row
              h3
                | Todavia no hay contenidos cargados para este codigo
              h4
                | Volve a intentar en unos dias!
              .back-button-container
                a.btn.btn-default.btn-sm(
                  href     = ""
                  ng-click = "redeemCode.contentCode = null; redeemCode.code = null"
                  analytics-on    = "click"
                  analytics-event = "Back to redeem code page"
                ) Canjear otro codigo

          div(ng-if="redeemCode.hasContentItems()")
            .row
              .back-button-container
                a.btn.btn-default.btn-sm(
                  href     = ""
                  ng-click = "redeemCode.contentCode = null; redeemCode.code = null"
                  analytics-on    = "click"
                  analytics-event = "Back to redeem code page"
                ) Canjear otro codigo

            .row.vertical-space

            .row.content-item-row(
              ng-repeat="contentItem in redeemCode.contentCode.content track by $index"
            )
              .col-xs-1.col-md-1.col-md-offset-1.content-item-index-container
                h5
                  span.glyphicon.glyphicon-headphones
              .col-xs-11.col-md-8
                .content-item-container
                  .hidden-xs
                    .media
                      .media-body.text-left
                        h4.media-heading {{ contentItem.title }}
                        p {{ contentItem.description }}
                        p
                          content-player(content="contentItem")
                        p
                          a.btn.btn-primary.btn-xs(
                            target  = "_blank"
                            ng-href = "{{ contentItem.url }}"
                            download
                            analytics-on       = "click"
                            analytics-event    = "Download content"
                            analytics-category = "Contents"
                            analytics-label    = "{{ redeemCode.downloadContentItemAnalyticsValue(contentItem) }}"
                          ) Descargar

                      .media-right
                        img.media-object.content-code-image(
                          ng-if="contentItem.imageUrl"
                          ng-src="{{ contentItem.imageUrl }}"
                        )

                  .visible-xs
                    .media
                      .media-body.text-left
                        h4.media-heading {{ contentItem.title }}
                        p {{ contentItem.description }}
                      .media-right
                        img.media-object.content-code-image.content-code-image-xs(
                          ng-if="contentItem.imageUrl"
                          ng-src="{{ contentItem.imageUrl }}"
                        )
                    p
                      content-player(content="contentItem")
                    p
                      a.btn.btn-primary.btn-xs(
                        target="_blank"
                        ng-href="{{ contentItem.url }}"
                        download
                        analytics-on       = "click"
                        analytics-event    = "Download content"
                        analytics-category = "Contents"
                        analytics-label    = "{{ redeemCode.downloadContentItemAnalyticsValue(contentItem) }}"
                      )
                        | Descargar

    .footer-push

  footer.footer
    .container
      p.text-muted
        small www.
        small.jedbangers JEDBANGERS
        small .com.ar
        br
        small Todo el contenido &copy; JEDBANGERS 2014
